# Authentication System Setup

## Overview
The authentication system connects the React frontend to the Node.js backend server for user login and signup functionality.

## Server Setup

### 1. Start the Server
```bash
cd server
npm install
npm start
```

The server runs on `http://localhost:3001` by default.

### 2. Environment Variables
Create a `.env` file in the server directory:
```env
PORT=3000
JWT_SECRET=your-secret-key-here
MONGODB_URI=your-mongodb-connection-string
```

## Client Setup

### 1. Update API Base URL
In `client/lib/api.ts`, update the `API_BASE_URL` to match your server:
```typescript
const API_BASE_URL = 'http://localhost:3001/server';
```

### 2. Authentication Flow

#### Login Process:
1. User enters email and password
2. Frontend calls `authAPI.login(email, password)`
3. Server validates credentials and returns JWT token
4. Token is stored in localStorage
5. User is redirected to main app

#### Signup Process:
1. User fills out signup form with validation
2. Frontend calls `authAPI.signup(name, email, password)`
3. Server creates new user account
4. User is prompted to login

### 3. Using Authentication in Components

#### With Auth Context:
```typescript
import { useAuth } from '../lib/auth-context';

function MyComponent() {
  const { user, isAuthenticated, login, logout } = useAuth();
  
  if (!isAuthenticated) {
    return <div>Please login</div>;
  }
  
  return <div>Welcome, {user?.name}!</div>;
}
```

#### With Protected Routes:
```typescript
import { ProtectedRoute } from '../components/ProtectedRoute';

function App() {
  return (
    <ProtectedRoute>
      <MyProtectedComponent />
    </ProtectedRoute>
  );
}
```

## API Endpoints

### Login
- **URL**: `POST /server/login`
- **Body**: `{ email: string, password: string }`
- **Response**: `{ success: boolean, jwtToken: string, email: string, name: string }`

### Signup
- **URL**: `POST /server/signup`
- **Body**: `{ name: string, email: string, password: string }`
- **Response**: `{ success: boolean, message: string }`

## Features

### Client-Side Features:
- ✅ Real-time form validation
- ✅ Password strength indicator
- ✅ JWT token management
- ✅ Automatic login state persistence
- ✅ Protected routes
- ✅ Error handling and user feedback

### Server-Side Features:
- ✅ Password hashing with bcrypt
- ✅ JWT token generation
- ✅ Input validation with Joi
- ✅ MongoDB user storage
- ✅ CORS enabled
- ✅ Error handling

## Testing

### Test Login:
1. Start both server and client
2. Navigate to the app
3. Click "Sign up" to create an account
4. Use the same credentials to login
5. Verify you're redirected to the main app

### Test Protected Routes:
1. Login successfully
2. Navigate to protected pages
3. Logout and verify you're redirected to login

## Troubleshooting

### Common Issues:

1. **CORS Errors**: Ensure server has CORS enabled
2. **Connection Refused**: Check if server is running on correct port
3. **JWT Errors**: Verify JWT_SECRET is set in server .env
4. **MongoDB Connection**: Ensure MongoDB is running and connection string is correct

### Debug Steps:
1. Check browser console for errors
2. Verify server logs for API calls
3. Check localStorage for stored tokens
4. Test API endpoints with Postman

## Security Notes

- JWT tokens expire after 24 hours
- Passwords are hashed with bcrypt
- Input validation on both client and server
- HTTPS recommended for production
- Consider implementing refresh tokens for better security 